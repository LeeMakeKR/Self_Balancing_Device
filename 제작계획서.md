# Self_Balancing_Device 제작 계획서

## 프로젝트 개요
자이로 센서와 밸런스 휠 모터를 이용한 모서리 균형 장치 개발 프로젝트
simpleFOC를 사용한 제어. 

## 개발 단계

### Phase 1: 1축 균형 장치 개발 및 하드웨어 설계


#### MCU 선정


### 코드 구조 설계 원칙
로직의 개선 및 수정이 용이하도록 구조적으로 모듈화하여 개발합니다.






아두이노에 연결했더니 보드를 몇개씩 날렴먹음. 
5핀 모터 핀아웃
red vdd
blk gnd
blu pwm
green FG

3720 모터는 U1 칩의 8-15번을 연결해야 한다..


타오바오산 모터들은 제어와 회전이 애매하니 (*특히 브레이크)
회로를 별도 제작하면 좋을듯?

어쨋건 이 프로젝트에 쓰기에는 엄청난 개조가 필요하고, 그러려면 별도의 모터와 제어회로가 필요하게 된다
그러면 결국 타오바오 모터에서 abc 상 선만 따서 dengfoc 혹은 simplefoc 드라이버에 연결해서 제어하는게 ?




자이로 휠은 알루미늄 기성품의 경우 7~15$

국내 스텐레스 레이저 가공시 3개 39000원이므로 차라리 레이저 가공이 나을듯. 


메인 컨트롤러는 ESP32 DEVKIT
자기각 센서는 AS5047P

모터 드라이버는 SIMPLEFOC 기반 drv8313


자기각 센서는 cs 로 칩 선택시에만 값을 읽을 수 있으므로, 동시에 값을 읽거나 하나의 센서값을 읽는 동안 다른 센서값이 변화하는 경우는 놓칠 수 있다. 

->인터럽트 등을 사용하는 것보다 주기적으로 순환 리딩이 나음



